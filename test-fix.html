<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Fix - Date/Time Selection</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .test-info {
            background: #e3f2fd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }
        .console-output {
            background: #263238;
            color: #ffffff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-info">
            <h2>üîß Date/Time Selection Fix Test</h2>
            <p>This page uses the fixed JavaScript to test date/time selection.</p>
            <p><strong>Test:</strong> Select date 12/08/2025 and click 1pm button</p>
            <p><strong>Expected:</strong> Should find and display "12-08-2025 1pm.webp"</p>
        </div>

        <!-- Header Section -->
        <header class="header">
            <h1>Date/Time Fix Test</h1>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Controls Section -->
            <section class="controls-section">
                <div class="custom-date-picker">
                    <div class="date-input-container">
                        <div class="date-display" id="date-display" tabindex="0">
                            <span class="date-icon">üìÖ</span>
                            <span class="date-text" id="date-text">Select Date</span>
                        </div>
                        <div class="date-picker-calendar" id="date-picker-calendar">
                            <div class="calendar-header">
                                <button type="button" class="calendar-nav-btn" id="prev-month">‚Äπ</button>
                                <div class="calendar-month-year" id="calendar-month-year">January 2025</div>
                                <button type="button" class="calendar-nav-btn" id="next-month">‚Ä∫</button>
                            </div>
                            <div class="calendar-grid">
                                <div class="calendar-weekdays">
                                    <div class="calendar-weekday">Sun</div>
                                    <div class="calendar-weekday">Mon</div>
                                    <div class="calendar-weekday">Tue</div>
                                    <div class="calendar-weekday">Wed</div>
                                    <div class="calendar-weekday">Thu</div>
                                    <div class="calendar-weekday">Fri</div>
                                    <div class="calendar-weekday">Sat</div>
                                </div>
                                <div class="calendar-days" id="calendar-days">
                                    <!-- Calendar days will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Hidden input for compatibility -->
                    <input type="hidden" id="date-picker" />
                </div>
                
                <div class="button-group">
                    <button class="btn-primary time-button" data-time="1pm">1:00 PM Draw</button>
                    <button class="btn-success time-button" data-time="6pm">6:00 PM Draw</button>
                    <button class="btn-warning time-button" data-time="8pm">8:00 PM Draw</button>
                </div>
                
                <div style="margin-top: 20px; text-align: center;">
                    <button onclick="testManualSearch()" style="background: #ff9800; color: white; border: none; padding: 10px 20px; border-radius: 5px;">
                        Manual Test: 12-08-2025 1pm
                    </button>
                </div>
            </section>

            <!-- Result Display Section -->
            <section class="result-section">
                <div class="image-container" id="result-container">
                    <div class="image-placeholder">
                        <div class="image-icon">üé´</div>
                        <div>
                            <div>Lottery Result Display</div>
                            <div style="font-size: 0.8125rem; margin-top: 0.5rem; opacity: 0.8;">
                                Select a date and time slot to view results
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Console Output -->
            <section class="result-section">
                <h3>üñ•Ô∏è Console Output</h3>
                <div class="console-output" id="console-log"></div>
            </section>
        </main>
    </div>

    <!-- Enhanced script with console capture -->
    <script src="script.js"></script>
    <script>
        // Capture console logs and display them
        const consoleDiv = document.getElementById('console-log');
        const originalLog = console.log;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logText = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const timestamp = new Date().toLocaleTimeString();
            consoleDiv.innerHTML += `<div>[${timestamp}] ${logText}</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };

        // Manual test function
        async function testManualSearch() {
            console.log('üß™ MANUAL TEST: Searching for 12-08-2025 1pm');
            
            // Set the date to 12/08/2025
            const testDate = new Date(2025, 7, 12); // Month is 0-indexed
            console.log(`üìÖ Test date object: ${testDate.toDateString()}`);
            
            if (window.imageWeb) {
                // Set the current date in the controller
                imageWeb.currentDate = testDate;
                imageWeb.updateDateDisplay();
                
                // Trigger the search
                await imageWeb.findAndDisplayImageForDateTime(testDate, '1pm');
            } else {
                console.log('‚ùå imageWeb controller not found');
            }
        }

        // Log when page loads
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Test page loaded successfully');
            setTimeout(() => {
                if (window.imageWeb) {
                    console.log('‚úÖ ImageWeb controller is available');
                    console.log(`üìä Available images: ${imageWeb.availableImages.length}`);
                } else {
                    console.log('‚ùå ImageWeb controller not found');
                }
            }, 1000);
        });
    </script>
</body>
</html>
